## 定义  
 **背包问题(Knapsack problem)** 是一种组合优化的[NP完全问题](https://baike.baidu.com/item/NP%E5%AE%8C%E5%85%A8%E9%97%AE%E9%A2%98)。
问题可以描述为：给定一组物品，每种物品都有自己的重量和价格，在限定的总重量内，我们如何选择，才能使得物品的总价格最高。问题的名称来源于如何选择最
合适的物品放置于给定背包中。也可以将背包问题描述为决定性问题，即在总重量不超过W的前提下，总价值是否能达到V？  

## 题目

  有N件物品和一个容量为V的背包。第i件物品的重量是w[i]，价值是v[i]。求解将哪些物品装入背包可使这些物品的重量总和不超过背包容量，且价值总和最大。

### 基本思路  

>  这是最基础的背包问题，特点是：每种物品仅有一件，可以选择放或不放。  
>  用子问题定义状态：即f[i][v]表示前i件物品恰放入一个容量为v的背包可以获得的最大价值。则其状态转移方程便是：  
>  f[i][v]=max{ f[i-1][v], f[i-1][v-w[i]]+v[i] }。  
>  可以压缩空间，f[v]=max{f[v],f[v-w[i]]+v[i]}  

### 01背包问题  

01背包问题描述：有编号分别为a,b,c,d,e的五件物品，它们的重量分别是2,2,6,5,4，它们的价值分别是6,3,5,4,6，每件物品数量只有一个，
现在给你个承重为10的背包，如何让背包里装入的物品具有最大的价值总和？
 
 动态规划的基本思路：将该问题转换成子问题，考虑五件物品在给定承重 C 的背包下最大价值为原问题，如下表所示，即为考虑abcde，C = 10时的最大价值，
 假设为f[5][10]，原问题的解可以分解为两种情况，第一种情况是不考虑放入a只考虑放入bcde承重为C时的最大价值f[4][C],第二种情况是考虑放入a时的最大价值，
 即value[a]+f[4][10-weight[a]]。 
 原问题的解f[5][10]取上述两种情况中的最大值，即f[5][10] = max{f[4][10], (f[4][10-weight[a]+value[a]))}。
 以此类推，自顶向下的分析可以看出原问题需要子问题的解，我们需要先计算出子问题的解，自底向上求解。求解方式如下表所示，顺序是自底向上、从左往右，
 或者从左往右、自底向上都可以。注意此问题中的abcde可以包含相同的物件，它们之间的顺序也可以是任意的，不影响最终的结果.

  |    name    |   weight     |    value      |  0  |  1  |  2  |  3  |  4  |  5  |  6  |  7  |  8  |  9  |  10  |
  |   :---:    |    :---:     |    :---:      |:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
  |      a     |       2      |      6        |  0  |  0  |  6  |  6  |  9  |  9  |  12 |  12 |  15 | 15  | 15  |
  |      b     |       2      |      3        |  0  |  0  |  3  |  3  |  6  |  6  |  9  |  9  |  9  | 10  | 11  |
  |      c     |       6      |      5        |  0  |  0  |  0  |  0  |  6  |  6  |  6  |  6  |  6  | 10  | 11  |
  |      d     |       5      |      4        |  0  |  0  |  0  |  0  |  6  |  6  |  6  |  6  |  6  | 10  | 10  |
  |      e     |       4      |      6        |  0  |  0  |  0  |  0  |  6  |  6  |  6  |  6  |  6  | 6   | 6   |

### 完全背包问题：

完全背包问题描述：有编号分别为a,b,c,d的四件物品，它们的重量分别是wt = 2,3,4,7，它们的价值分别是val = 1,3,5,9，每件物品数量无限个，现
在给你个承重为W=10的背包，如何让背包里装入的物品具有最大的价值总和？

完全背包问题与01背包问题的区别在于每一件物品的数量都有无限个，而01背包每件物品数量只有一个。

如果我们用和01背包一样的状态，f[i][W]表示前i种物品恰放入一个重量为W的背包的最大价值，那我们应该用k表示当前容量下可以装第i种物品的件数，
那么k的范围应该是0≤k≤W/wt[i].既然要用当前物品i把当前容量装满，那需要0≤k≤W/wt[i]件，其中k表示件数。  

状态转移方程为：  
   **f[i][j] = max{f[i-1][W],f[i-1][W - k * wt[i]] + k * val[i]}   (0<=k*wt[i]<=v)**
  *** 代码见方法一 ***  
  #### 优化

让f[i][j]表示出在前i种物品中选取若干件物品放入容量为j的背包所得的最大价值。  

所以说，对于第i件物品有放或不放两种情况，而放的情况里又分为放1件、2件、......W/wt[i]件.  

如果不放那么 **f[i][j]=f[i-1][j]** ；如果确定放，那么当前背包中应该出现 **至少一件第i种物品** ，所以 **f[i][j]中至少应该出现一件第i种物品,即f[i][j]=f[i][j-W[i]]+val[i].**  

因为我们要把当前物品i放入包内，因为物品i可以无限使用，所以要用f[i][j-W[i]]；如果我们用的是f[i-1][j-W[i]]，f[i-1][j-W[i]]的意思是说，我们只有一件当前物品i，所以我们在放入物品i的时候需要考虑到第i-1个物品的价值(f[i-1][j-W[i]])；但是现在我们有无限件当前物品i，我们不用再考虑第i-1个物品了，我们所要考虑的是在当前容量下是否再装入一个物品i，而[j-W[i]]的意思是指要确保f[i][j]至少有一件第i件物品，所以要预留W[i]的空间来存放一件第i种物品。总而言之，如果放当前物品i的话，它的状态就是它自己"i"，而不是上一个"i-1"。

所以状态转移方程为：

 **f[i][j]=max(f[i-1][j],f[i][j-W[i]]+val[i])**


  |    name    |   weight     |    value      |  0  |  1  |  2  |  3  |  4  |  5  |  6  |  7  |  8  |  9  |  10  |
  |   :---:    |    :---:     |    :---:      |:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
  |      d     |       7      |      9        |  0  |  0  |  1  |  3  |  5  |  5  |  6  |  9  |  10 | 10  | 12  |
  |      c     |       4      |      5        |  0  |  0  |  1  |  3  |  5  |  5  |  6  |  8  |  10 | 10  | 11  |
  |      b     |       3      |      3        |  0  |  0  |  1  |  3  |  3  |  4  |  6  |  6  |  7  | 9   | 9   |
  |      a     |       2      |      1        |  0  |  0  |  1  |  1  |  2  |  2  |  3  |  3  |  4  | 4   | 5   |
  
### 多重背包问题：

多重背包问题描述：有编号分别为a,b,c的三件物品，它们的重量分别是1，2，2，它们的价值分别是6，10，20，他们的数目分别是10，5，2，现在给你个承重为 8 
的背包，如何让背包里装入的物品具有最大的价值总和？

多重背包和01背包、完全背包的区别：多重背包中每个物品的个数都是给定的，可能不是一个，绝对不是无限个。

多重背包是每个物品有不同的个数限制，如第i个物品个数为num[i]。

同样可以用f[i][w]表示前i间物品恰放入一个容器为w的背包可以获得的最大价值，且每个物品数量不超多num[i]。则其状态转移方程为： 

  **f[i][w] = max{f[i-1][W-k*wt[i]]+k*val[i]} ,其中(0<=k<=min{W/wt[i], num[i]})**  

  |    name  |   weight   |    value    |    num   |  0  |  1  |  2  |  3  |  4  |  5  |  6  |  7  |  8  |  
  |   :---:  |    :---:   |    :---:    |    :---: |:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
  |      c   |       2    |      20     |    2     |  0  |  6  |  20  |  26  |  40  |  46  |  52  |  58  |  64 | 
  |      b   |       2    |      10     |    5     |  0  |  6  |  12  |  18  |  24  |  30  |  36  |  42  |  48 | 
  |      a   |       1    |      6      |    10    |  0  |  6  |  12  |  18  |  24  |  30  |  36  |  42  |  48  | 

<img src="http://chart.googleapis.com/chart?cht=tx&chl=\Large x=\frac{-b\pm\sqrt{b^2-4ac}}{2a})">

